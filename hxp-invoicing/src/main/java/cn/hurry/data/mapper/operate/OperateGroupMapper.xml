<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://www.mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 操作组映射配置文件 -->
<mapper namespace="cn.hurry.data.mapper.operate.OperateGroupMapper">

	<resultMap id="OperateGroupResultMap" type="OperateGroup" >
		<id property="id" column="id" />
	</resultMap>

	<sql id="dynamicUpdate">
		<if test="operateId != null">
			operateId=#{operateId},
			</if>
		<if test="managerGroupId != null">
			managerGroupId=#{managerGroupId},
		</if>
		<if test="addTime != null">
			addTime=#{addTime}
		</if>
	</sql>
	
	<select id="selectOperateGroupList1" parameterType="int" resultMap="OperateGroupResultMap">
		SELECT * FROM operate_group 
		WHERE managerGroupId=#{id}
	</select>	
		
	<insert id="insetOperateGroup" parameterType="OperateGroup" keyProperty="id"
		useGeneratedKeys="true" flushCache="true">
		INSERT INTO
		operate_group(operateId,managerGroupId)
		VALUES(#{operateId},#{managerGroupId})
	</insert>
	
	<select id="selectOperateGroupById" parameterType="int"
		resultMap="OperateGroupResultMap">
		SELECT * FROM operate_group WHERE id=#{id}
	</select>
	

	<select id="selectOperateGroupByOperateId" parameterType="int"
		resultType="OperateGroup">
		SELECT * FROM operate_group WHERE operateId=#{operateId}
	</select>

	<select id="selectOperateGroupByManagerGroupId" parameterType="int"
		resultMap="OperateGroupResultMap">
		SELECT * FROM operate_group WHERE managerGroupId=#{managerGroupId}
	</select>

	<select id="selectAllOperateGroup" resultMap="OperateGroupResultMap">
		SELECT * FROM operate_group 
	</select>

	<update id="updateOperateGroup" parameterType="OperateGroup" flushCache="true">
		UPDATE operate_group
		<set>
			<include refid="dynamicUpdate" />
		</set>
		WHERE id=#{id}
	</update>

	<delete id="deleteOperateGroup" parameterType="int" flushCache="true">
		DELETE
		FROM
		operate_group WHERE id=#{id}
	</delete>
	
	<!-- 根据分组id删除分组权限 -->
	<delete id="deleteByManagerGroupId" parameterType="int" flushCache="true">
		DELETE FROM operate_group where managerGroupId=#{managerGroupId}
	</delete>
</mapper> 